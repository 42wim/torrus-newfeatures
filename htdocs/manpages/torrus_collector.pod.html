<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>collector - Torrus data Collector.</title>
<link rel="stylesheet" href="../torrusdoc.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#files">FILES</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#notes">NOTES</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>
-->
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>collector - Torrus data Collector.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p><strong>torrus collector</strong> --tree=<em>TREENAME</em> [<em>options...</em>]</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This command starts the Collector process for the tree <em>TREENAME</em>. By
default it forks into a daemon, sets the log output file to
<em>/var/log/torrus/collector.TREENAME.log</em>, performs one
Collector cycle, and sleeps until the next cycle is scheduled. In
daemon mode the log file can be reopened by sending it a SIGHUP
signal.</p>
<p>Collector cycle scheduling is controlled by two parameters defined
for each individual configuration leaf: <code>collector-period</code> and
<code>collector-timeoffset</code>. See the <strong>Torrus Configuration Guide</strong> for more
details.</p>
<p>The number of OID (Object IDentifier) variable bindings sent by 
Collector is controlled by the datasource parameter <code>snmp-oids-per-pdu</code>.
It is set to a default value of 40 in <em>snmp-defs.xml</em>, and may be
overwritten at the host level.</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<dl>
<dt><strong><a name="item__2d_2dinstance_3dn"><strong>--instance</strong>=<em>N</em></a></strong>

<dd>
<p>Defines the collector instance. A single tree can allow more than one
collector instance. The number of instances is defined in <code>run</code> hash
in the <em>torrus-siteconfig.pl</em>'s <code>%Torrus::Global::treeConfig</code>.
If the number of instances is more than one, this option is mandatory.
The collecting job is split between the instances, and normally all
instances should be started by the startup scripts. The tree should
be re-compiled after the number of instances is changed in the siteconfig.
In the example below the tree <em>tree_A</em> will be served by three
collector instances:</p>
</dd>
<dd>
<pre>
  %Torrus::Global::treeConfig = (
    'tree_A' =&gt; {
      'description' =&gt; 'The First Tree',
      'xmlfiles' =&gt; [qw(a1.xml a2.xml a3.xml)],
      'run' =&gt; { 'collector' =&gt; 3, 'monitor' =&gt; 1 } },
   );</pre>
</dd>
</li>
<dt><strong><a name="item__2d_2dnodaemon"><strong>--nodaemon</strong></a></strong>

<dd>
<p>Prevents the process from becoming a daemon and sets the log to STDERR.</p>
</dd>
</li>
<dt><strong><a name="item__2d_2drunonce"><strong>--runonce</strong></a></strong>

<dd>
<p>Instructs the collector to run once and exit. Implies <strong>--nodaemon</strong>.</p>
</dd>
</li>
<dt><strong><a name="item__2d_2drunalways"><strong>--runalways</strong></a></strong>

<dd>
<p>Instructs the collector process to continue running even if no collector
datasources are defined in the tree. In this case, the process will check
once per hour if the configuration has changed.</p>
</dd>
</li>
<dt><strong><a name="item__2d_2ddebug"><strong>--debug</strong></a></strong>

<dd>
<p>Sets the log level to debug.</p>
</dd>
</li>
<dt><strong><a name="item__2d_2dverbose"><strong>--verbose</strong></a></strong>

<dd>
<p>Sets the debug level to info.</p>
</dd>
</li>
<dt><strong><a name="item__2d_2dhelp"><strong>--help</strong></a></strong>

<dd>
<p>Displays a help message.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="files">FILES</a></h1>
<dl>
<dt><strong><a name="item__2fusr_2flocal_2fetc_2ftorrus_2fconf_2ftorrus_2dsi"><em>/usr/local/etc/torrus/conf/torrus-siteconfig.pl</em></a></strong>

<dd>
<p>Torrus site configuration script.</p>
</dd>
</li>
<dt><strong><a name="item__2fvar_2flog_2ftorrus_2fcollector_2etreename_2elog"><em>/var/log/torrus/collector.TREENAME.log</em></a></strong>

<dd>
<p>Collector's log for the tree <em>TREENAME</em>.</p>
</dd>
</li>
<dt><strong><a name="item__2fusr_2flocal_2ftorrus_2fxmlconfig_2fsnmp_2ddefs_"><em>/usr/local/torrus/xmlconfig/snmp-defs.xml</em></a></strong>

<dd>
<p>Basic variable definitions for the SNMP collector.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><em>torrus(1)</em></p>
<p>
</p>
<hr />
<h1><a name="notes">NOTES</a></h1>
<p>See more documentation at Torrus home page: <a href="http://torrus.org">http://torrus.org</a></p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Stanislav Sinyagin &lt;<a href="mailto:ssinyagin@yahoo.com">ssinyagin@yahoo.com</a>&gt;</p>

</body>

</html>
